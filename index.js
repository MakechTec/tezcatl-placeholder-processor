"use strict";exports.__esModule=true;exports.GENERAL_SLOT_WITH_DEFAULT_VALUE=exports.SLOT_DEFAULT_VALUE_REGEXP=exports.GENERAL_SLOT_REGEXP=exports.PlaceholderProcessor=void 0;var tezcatl_cli_1=require("@makechtec/tezcatl-cli");var pipe_1=require("@makechtec/pipe");var PlaceholderProcessor=function(){function PlaceholderProcessor(){}PlaceholderProcessor.prototype.parse=function(content){var _this=this;return new pipe_1.Pipe(content).addAction((function(newContent){return _this.replaceMultiplePlaceholders(newContent,tezcatl_cli_1.CLI.getAllArguments())})).addAction((function(newContent){return _this.replaceForDefaults(newContent)})).addAction((function(newContent){return _this.cleanEmptyPlaceholders(newContent)})).execActions()};PlaceholderProcessor.prototype.replaceMultiplePlaceholders=function(content,placeholders){var _this=this;return placeholders.reduce((function(newContent,placeholder){return _this.replacePlaceholder(newContent,placeholder)}),content)};PlaceholderProcessor.prototype.replacePlaceholder=function(content,placeholder){var pattern=this.createPlaceholderRegExp(placeholder.name);var matches=content.match(pattern);if(matches===null){return content}var placeholderContent=matches[0];var value="";if(placeholder.value!==""){value=placeholder.value}if(placeholder.value===""&&/\|/g.test(placeholderContent)){value=this.extractDefaultValue(placeholderContent)}return content.replace(pattern,value)};PlaceholderProcessor.prototype.cleanEmptyPlaceholders=function(content){return content.replace(exports.GENERAL_SLOT_REGEXP,"")};PlaceholderProcessor.prototype.replaceForDefaults=function(content){var _this=this;var slots=content.match(exports.GENERAL_SLOT_WITH_DEFAULT_VALUE);if(slots===null){return content}return slots.reduce((function(newContent,slot){return newContent.replace(slot,_this.extractDefaultValue(slot))}),content)};PlaceholderProcessor.prototype.extractDefaultValue=function(slot){var matchesDefaultValue=slot.match(exports.SLOT_DEFAULT_VALUE_REGEXP);return matchesDefaultValue[0].substring(1)};PlaceholderProcessor.prototype.createPlaceholderRegExp=function(name){return new RegExp("\\$\\s*\\{\\s*("+name+")\\s*\\|?\\s*([a-z|A-Z|\\d]*)\\s*\\}","g")};return PlaceholderProcessor}();exports.PlaceholderProcessor=PlaceholderProcessor;exports.GENERAL_SLOT_REGEXP=/\$\s*\{\s*([a-z|A-Z|\d|\.]*)\s*?\}/g;exports.SLOT_DEFAULT_VALUE_REGEXP=/\|([a-z|A-Z|\d]*)/g;exports.GENERAL_SLOT_WITH_DEFAULT_VALUE=/\$\s*\{\s*([a-z|A-Z|\d]*)\s*\|\s*([a-z|A-Z|\d]*)\s*?\}/g;